---
title: Живой Мир - Симуляция Общества
description: Документация проекта симуляции живого мира с уникальными NPC
keywords:
  - документация
  - архитектура
  - симулятор
  - NPC
  - BDI
  - AI
lang: ru
---

# Живой Мир - Симуляция Общества

## Обзор Проекта

Симуляция живого мира, где каждый NPC - уникальная личность со своими характеристиками,
характером и развитием. Мир живёт сам по себе, развиваясь от примитивной общины до
средневекового общества.

### Ключевые Принципы

1. **Марксистский подход**: Экономический базис определяет надстройку
   - Производительные силы → Производственные отношения → Культура/Идеология
   - Классы возникают из отношений собственности
   - Идеология оправдывает существующий порядок

2. **Emergent поведение**: Всё возникает, а не задаётся
   - Классы появляются сами из экономических условий
   - Культура формируется из повседневной жизни
   - Технологии открываются через труд

3. **Уникальные личности**: Каждый NPC индивидуален
   - Генетика (наследование от родителей)
   - Память и опыт
   - BDI-архитектура (Beliefs-Desires-Intentions)

---

## Архитектура

```
src/
├── core/           # Ядро симуляции
│   ├── config.py       # Конфигурация
│   ├── simulation.py   # Главный цикл
│   └── events.py       # Система событий (pub/sub)
│
├── world/          # Мир
│   ├── map.py          # Карта (сетка + координаты)
│   ├── terrain.py      # Типы местности
│   ├── climate.py      # Климат и катаклизмы
│   └── location.py     # Локации
│
├── economy/        # БАЗИС
│   ├── resources.py    # Ресурсы
│   ├── production.py   # Производство
│   ├── technology.py   # Технологии
│   └── property.py     # Собственность
│
├── society/        # Социальная структура
│   ├── family.py       # Семьи и родство
│   ├── demography.py   # Демография
│   └── classes.py      # Классовая система
│
├── culture/        # НАДСТРОЙКА
│   ├── beliefs.py      # Верования и идеология
│   ├── traditions.py   # Традиции
│   └── norms.py        # Социальные нормы
│
└── npc/            # Персонажи
    ├── character.py    # Основной класс NPC
    ├── genetics.py     # Генетика
    ├── memory.py       # Память (Generative Agents)
    ├── personality.py  # Личность
    ├── needs.py        # Потребности
    └── ai/             # Искусственный интеллект
        └── bdi.py      # BDI-архитектура
```

---

## Результаты Исследований

### 1. Dwarf Fortress - Процедурная История

**Ключевые идеи:**
- Мир генерируется с полной историей до начала игры
- Каждый персонаж имеет уникальную биографию
- События связаны причинно-следственными цепочками
- "Истории рассказывают себя сами" через симуляцию

**Применение:**
- Система событий с причинно-следственными связями
- Память NPC о важных событиях
- История мира записывается автоматически

### 2. Majesty - Непрямое Управление

**Ключевые идеи:**
- Игрок не управляет юнитами напрямую
- Система флагов-наград (bounty flags)
- У каждого класса своё поведение:
  - Рейнджеры исследуют
  - Воины сражаются
  - Рогги жадные, идут за золотом
- Характеристики влияют на решения

**Применение:**
- NPC принимают решения автономно
- Профессия влияет на приоритеты
- Жадность, храбрость и др. черты определяют поведение

### 3. Generative Agents (Stanford)

**Ключевые идеи:**
- Поток памяти (Memory Stream)
- Рефлексия (Reflection) - выводы из опыта
- Планирование (Planning) на день
- Реакция на события

**Применение:**
- NPC помнят важные события
- Делают выводы ("Иван часто помогает - он друг")
- Планируют действия на основе целей
- Реагируют на изменения в мире

### 4. BDI-Архитектура

**Компоненты:**
- **Beliefs** (Убеждения) - что NPC знает/думает о мире
- **Desires** (Желания) - цели и потребности
- **Intentions** (Намерения) - выбранные планы действий

**Цикл:**
1. Восприятие → Обновление убеждений
2. Убеждения + Желания → Формирование намерений
3. Намерения → Действия
4. Действия → Изменение мира

---

## Модель Мира

### Экономические Формации (по Марксу)

```
Первобытная община → Рабовладение → Феодализм → Капитализм
      ↓                    ↓              ↓
  Коллективная        Рабы как      Крепостные
  собственность      собственность   прикреплены
                                     к земле
```

**В нашей симуляции:**
1. **Старт**: Примитивная община
   - Нет частной собственности
   - Коллективный труд
   - Равное распределение

2. **Развитие**: Возникновение собственности
   - Избыточный продукт
   - Обособление семей
   - Накопление богатства

3. **Классы**: Эксплуататоры и эксплуатируемые
   - Владельцы земли vs безземельные
   - Ремесленники vs работники
   - Классовое сознание и конфликты

### Климат и Ресурсы

**Сезоны (360 дней в году):**
- Весна (дни 1-90): Посев
- Лето (91-180): Рост
- Осень (181-270): Урожай
- Зима (271-360): Выживание

**Катаклизмы:**
- Засуха
- Наводнение
- Мор (эпидемия)
- Голод
- Пожар
- Суровая зима
- Нашествие саранчи

### Демография

**Жизненные этапы:**
- Младенец (0-2)
- Ребёнок (3-12)
- Подросток (13-17)
- Молодой (18-30)
- Взрослый (31-50)
- Зрелый (51-65)
- Старик (66+)

**Факторы смертности:**
- Возраст
- Здоровье
- Голод
- Болезни
- Климат

---

## Технологии

### Технологическое Древо

```
Первобытные:
├── Обработка камня
├── Добыча огня
├── Охота
├── Собирательство
└── Рыболовство

Каменный век:
├── Лук и стрелы (← охота + камень)
├── Гончарство (← огонь)
├── Ткачество (← собирательство)
├── Примитивное земледелие (← собирательство + камень)
├── Приручение животных (← охота)
└── Строительство жилищ (← камень)

Медный/Бронзовый век:
├── Обработка металла (← огонь + гончарство)
├── Бронзовое литьё (← металл)
├── Плуг (← земледелие + животные)
└── Письменность (← гончарство)

Железный век:
└── Обработка железа (← бронза)

Социальные технологии:
├── Племенная организация
├── Разделение труда (← организация)
├── Торговля (← разделение труда)
└── Частная собственность (← земледелие + торговля)
```

### Открытие Технологий

Технологии открываются через:
1. **Работу** - занимаясь деятельностью, NPC может случайно открыть связанную технологию
2. **Накопление** - прогресс накапливается от попыток
3. **Передачу** - обучение от знающего NPC

---

## Параметры Симуляции

### Начальные Условия
- Население: 10-15 NPC
- Семьи: 3-4
- Технологии: Базовые первобытные
- Собственность: Общинная

### Скорость
- 1 час реального времени ≈ 1 год симуляции (настраиваемо)
- Автопауза на важных событиях

### MVP Критерии
1. Развитие технологий через поколения
2. Уникальное поведение каждого NPC
3. Принцип базис → надстройка работает
4. Смена поколений влияет на общество

---

## Текущий Статус

### Готово:
- [x] Ядро симуляции и конфигурация
- [x] Карта мира (сетка + координаты)
- [x] Ресурсы и климат
- [x] Экономический базис (производство, собственность, технологии)
- [x] Семьи и демография
- [x] Классовая система (emergent)
- [x] Культурная надстройка (верования, традиции, нормы)
- [x] Генетика NPC (наследование от родителей)
- [x] Расширенная память NPC (поток памяти, рефлексия)
- [x] BDI-архитектура AI (убеждения, желания, намерения)
- [x] Главный цикл симуляции
- [x] Базовое тестирование

### Работает:
- Создание мира с 10-15 NPC
- Смена времени (часы → дни → месяцы → годы)
- Сезоны и погода
- Открытие технологий через работу
- Распространение знаний между NPC
- Возникновение верований
- Базовые действия NPC (собирать, охотиться, есть, отдыхать)

### Планируется:
- [ ] Полная интеграция BDI в главный цикл
- [ ] Визуализация (текстовая/графическая)
- [ ] Сохранение/загрузка
- [ ] Режим наблюдателя с автопаузой
- [ ] Статистика и графики
- [ ] Возникновение частной собственности
- [ ] Классовые конфликты

---

## Запуск

```bash
cd /home/user/game
python3 main.py
```

---

## Лицензия

Проект разрабатывается для изучения emergent систем и агентного моделирования.
